<h1>Lieferant <%= @distributor.company_name %></h1>

<div class="widget_container left">
  <div class="widget" id="user_info">
    <h2>Lieferantendetails</h2>
    <p>
      <b>Kundennummer:</b>
      <%=h @distributor.client_no %>
    </p>

    <% unless @distributor.company.blank? %>
      <p>
        <b>Firma:</b>
        <%=h @distributor.company_name %>
      </p>
    <% end %>

    <p>
      <b>Ansprechpartner:</b>
      <%=h @distributor.contact_person %>
    </p>

    <% if @distributor.address %>
      <p>
        <b>Adresse:</b><br />
        <%= @distributor.address.to_html rescue 'nicht angegeben' %>
      </p>

      <p>
        <b>Telefon:</b>
        <%=h @distributor.address.phone %>
      </p>

      <p>
        <b>Fax:</b>
        <%=h @distributor.address.fax %>
      </p>

      <p>
        <b>Mobil:</b>
        <%=h @distributor.address.mobile %>
      </p>
    <% end %>

    <p>
      <b>E-Mail:</b>
      <%= mail_to @distributor.email %>
    </p>

    <p>
      <b>Rabatt:</b>
      <%=h @distributor.discount %>%
    </p>
  </div>
</div>

<div class="widget_container right">
  <div class="widget">
    <div class="full_width_input">
      <% form_for @distributor do |f| %>
        <h2><%= f.label :remarks, 'Anmerkungen' %></h2>
        <%= f.text_area :remarks, :size => '50x10', :class => 'initial' %>
      <% end %>
    </div>
  </div>

  <% if @distributor.bank_account %>
    <div class="widget">
      <h2>Kontodaten</h2>
      <p>
        <b>Konto-Inhaber.:</b>
        <%=h @distributor.bank_account.registrar_name %>
      </p>
      <p>
        <b>Konto-Nr.:</b>
        <%=h @distributor.bank_account.number %>
      </p>
      <p>
        <b>BLZ:</b>
        <%=h @distributor.bank_account.blz %>
      </p>
      <p>
        <b>Bank:</b>
        <%=h @distributor.bank_account.bank_name %>
      </p>
      <p>
        <b>IBAN.:</b>
        <%=h @distributor.bank_account.iban %>
      </p>
      <p>
        <b>BIC.:</b>
        <%=h @distributor.bank_account.bic %>
      </p>
    </div>
  <% end %>
</div>

<hr />

<p class="bottom-actions">
  <%= link_to 'Bearbeiten', edit_distributor_path(@distributor), :class => 'edit' %>
  <%= link_to 'Neuen Lieferanten anlegen', new_distributor_path, :class => 'new' %>
  <%= link_to 'Zurück zur Übersicht', distributors_path, :class => 'back' %>
</p>

<p class="alternative_formats">
  Alternative Formate:
  <%= link_to image_tag('icons_16/text-xml.png') + ' XML', :format => 'xml' %> |
  <%= link_to image_tag('icons_16/application-json.png') + ' JSON', :format => 'json' %> |
</p>

<% javascript_on_load do %><script>
$('distributor_remarks').observe('focus', function(event) {
  event.element().removeClassName('saved');
});

$('distributor_remarks').observe('change', function(event) {
  event.element().up('form').request({
    onSuccess: function(response) {
      $('distributor_remarks').addClassName('saved');
    }
  });
});
<% end %>
